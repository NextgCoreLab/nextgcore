# =============================================================================
# NextGCore Rust Docker Environment Configuration
# =============================================================================
# Copy this file to .env and customize the values for your deployment.
# All variables have sensible defaults and are optional.
#
# Usage:
#   cp .env.example .env
#   # Edit .env with your values
#   docker compose up -d
#
# =============================================================================

# =============================================================================
# GENERAL SETTINGS
# =============================================================================

# Rust logging level (trace, debug, info, warn, error)
# Controls verbosity of all network function logs
RUST_LOG=info

# Enable Rust backtrace for debugging (0=disabled, 1=enabled, full=verbose)
RUST_BACKTRACE=1

# Compose project name (affects container and volume naming)
COMPOSE_PROJECT_NAME=nextgcore

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# Docker network subnet for NextGCore services
# Default: 172.22.0.0/24 (full), 172.23.0.0/24 (5gc), 172.24.0.0/24 (epc)
NEXTGCORE_NETWORK_SUBNET=172.22.0.0/24
NEXTGCORE_NETWORK_GATEWAY=172.22.0.1

# =============================================================================
# MONGODB CONFIGURATION
# =============================================================================

# MongoDB connection settings
MONGODB_HOST=mongodb
MONGODB_PORT=27017
MONGODB_DATABASE=nextgcore

# MongoDB URI (alternative to individual settings)
# DB_URI=mongodb://mongodb:27017/nextgcore

# =============================================================================
# PLMN CONFIGURATION (Mobile Network Identity)
# =============================================================================

# Mobile Country Code (MCC) - 3 digits
# Default: 999 (test network)
PLMN_MCC=999

# Mobile Network Code (MNC) - 2 or 3 digits
# Default: 70 (test network)
PLMN_MNC=70

# Tracking Area Code (TAC) for 5G/LTE
TAC=1

# =============================================================================
# 5G CORE (5GC) CONFIGURATION
# =============================================================================

# --- NRF (Network Repository Function) ---
NRF_SBI_ADDR=172.22.0.10
NRF_SBI_PORT=7777

# --- AUSF (Authentication Server Function) ---
AUSF_SBI_ADDR=172.22.0.11
AUSF_SBI_PORT=7777

# --- UDM (Unified Data Management) ---
UDM_SBI_ADDR=172.22.0.12
UDM_SBI_PORT=7777

# --- UDR (Unified Data Repository) ---
UDR_SBI_ADDR=172.22.0.13
UDR_SBI_PORT=7777

# --- PCF (Policy Control Function) ---
PCF_SBI_ADDR=172.22.0.14
PCF_SBI_PORT=7777
PCF_METRICS_PORT=9090

# --- NSSF (Network Slice Selection Function) ---
NSSF_SBI_ADDR=172.22.0.15
NSSF_SBI_PORT=7777

# --- BSF (Binding Support Function) ---
BSF_SBI_ADDR=172.22.0.16
BSF_SBI_PORT=7777

# --- AMF (Access and Mobility Management Function) ---
AMF_SBI_ADDR=172.22.0.17
AMF_SBI_PORT=7777
AMF_NGAP_ADDR=172.22.0.17
AMF_NGAP_PORT=38412
AMF_METRICS_PORT=9091

# AMF Identity
AMF_REGION=2
AMF_SET=1
AMF_NAME=nextgcore-amf0

# --- SMF (Session Management Function) ---
SMF_SBI_ADDR=172.22.0.18
SMF_SBI_PORT=7777
SMF_PFCP_ADDR=172.22.0.18
SMF_PFCP_PORT=8805
SMF_METRICS_PORT=9092

# --- UPF (User Plane Function) ---
UPF_PFCP_ADDR=172.22.0.19
UPF_PFCP_PORT=8805
UPF_GTPU_ADDR=172.22.0.19
UPF_GTPU_PORT=2152
UPF_METRICS_PORT=9094

# UPF Subnet for UE IP allocation
UPF_SUBNET=10.45.0.0/16
UPF_SUBNET_IPV6=2001:db8:cafe::/48

# =============================================================================
# EPC (Evolved Packet Core / 4G LTE) CONFIGURATION
# =============================================================================

# --- HSS (Home Subscriber Server) ---
HSS_DIAMETER_ADDR=172.22.0.30
HSS_DIAMETER_PORT=3868
HSS_METRICS_PORT=9098

# --- PCRF (Policy and Charging Rules Function) ---
PCRF_DIAMETER_ADDR=172.22.0.31
PCRF_DIAMETER_PORT=3868
PCRF_METRICS_PORT=9099

# --- SGW-C (Serving Gateway - Control Plane) ---
SGWC_GTPC_ADDR=172.22.0.32
SGWC_GTPC_PORT=2123
SGWC_PFCP_ADDR=172.22.0.32
SGWC_PFCP_PORT=8805

# --- MME (Mobility Management Entity) ---
MME_S1AP_ADDR=172.22.0.33
MME_S1AP_PORT=36412
MME_GTPC_ADDR=172.22.0.33
MME_METRICS_PORT=9095

# MME Identity
MME_GID=2
MME_CODE=1
MME_NAME=nextgcore-mme0

# --- SGW-U (Serving Gateway - User Plane) ---
SGWU_PFCP_ADDR=172.22.0.34
SGWU_PFCP_PORT=8805
SGWU_GTPU_ADDR=172.22.0.34
SGWU_GTPU_PORT=2152

# =============================================================================
# SERVICE MESH CONFIGURATION (Optional)
# =============================================================================

# --- SCP (Service Communication Proxy) ---
# Enable with: docker compose --profile scp up -d
SCP_SBI_ADDR=172.22.0.50
SCP_SBI_PORT=7778

# =============================================================================
# ROAMING CONFIGURATION (Optional)
# =============================================================================

# --- SEPP (Security Edge Protection Proxy) ---
# Enable with: docker compose --profile sepp up -d

# SEPP1 (Home PLMN)
SEPP1_SBI_ADDR=172.22.0.51
SEPP1_SBI_PORT=7779
SEPP1_N32C_PORT=7780
SEPP1_N32F_PORT=7781

# SEPP2 (Visited PLMN)
SEPP2_SBI_ADDR=172.22.0.52
SEPP2_SBI_PORT=7782
SEPP2_N32C_PORT=7783
SEPP2_N32F_PORT=7784

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# NAS Security Algorithms (5G)
# Integrity: NIA0 (null), NIA1 (SNOW3G), NIA2 (AES)
# Ciphering: NEA0 (null), NEA1 (SNOW3G), NEA2 (AES)
NAS_INTEGRITY_ORDER=NIA2,NIA1,NIA0
NAS_CIPHERING_ORDER=NEA0,NEA1,NEA2

# NAS Security Algorithms (EPC/4G)
# Integrity: EIA0 (null), EIA1 (SNOW3G), EIA2 (AES)
# Ciphering: EEA0 (null), EEA1 (SNOW3G), EEA2 (AES)
EPS_INTEGRITY_ORDER=EIA2,EIA1,EIA0
EPS_CIPHERING_ORDER=EEA0,EEA1,EEA2

# TLS Configuration (for SBI interfaces)
# Set to 'true' to enable TLS for SBI communication
SBI_TLS_ENABLED=false
SBI_TLS_CERT_PATH=/etc/nextgcore/tls/server.crt
SBI_TLS_KEY_PATH=/etc/nextgcore/tls/server.key
SBI_TLS_CA_PATH=/etc/nextgcore/tls/ca.crt

# =============================================================================
# NETWORK SLICING CONFIGURATION
# =============================================================================

# Default S-NSSAI (Single Network Slice Selection Assistance Information)
# SST: Slice/Service Type (1=eMBB, 2=URLLC, 3=MIoT)
# SD: Slice Differentiator (optional, 6 hex digits)
DEFAULT_SST=1
DEFAULT_SD=

# =============================================================================
# CAPACITY AND PERFORMANCE
# =============================================================================

# Maximum number of UEs supported
MAX_UE=1024

# Maximum number of peer connections
MAX_PEER=64

# Timer configurations (in seconds)
T3512_VALUE=540

# =============================================================================
# NETWORK NAME CONFIGURATION
# =============================================================================

# Network name displayed on UE
NETWORK_NAME_FULL=NextGCore
NETWORK_NAME_SHORT=Next

# =============================================================================
# METRICS AND MONITORING
# =============================================================================

# Enable Prometheus metrics endpoint
METRICS_ENABLED=true

# Metrics server bind address (0.0.0.0 for all interfaces)
METRICS_BIND_ADDR=0.0.0.0

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log file path (inside container)
LOG_PATH=/var/log/nextgcore

# Log level per component (overrides RUST_LOG)
# Format: component=level (e.g., ogs_sbi=debug,ogs_pfcp=trace)
# RUST_LOG=info,ogs_sbi=debug

# =============================================================================
# DOCKER BUILD CONFIGURATION
# =============================================================================

# Image tag for builds
TAG=latest

# Registry prefix (e.g., ghcr.io/nextgcore, docker.io/nextgcore)
REGISTRY=

# Push images after building
PUSH=false

# Use template Dockerfile for builds
USE_TEMPLATE=false

# Enable parallel builds
PARALLEL=false

# Number of parallel build jobs
PARALLEL_JOBS=4

# Build without cache
NO_CACHE=false

# Target platforms for multi-arch builds (comma-separated)
# Example: linux/amd64,linux/arm64
PLATFORMS=

# =============================================================================
# WEBUI CONFIGURATION
# =============================================================================

# WebUI port
WEBUI_PORT=9999

# WebUI bind address
WEBUI_BIND_ADDR=0.0.0.0

# =============================================================================
# DIAMETER CONFIGURATION (EPC)
# =============================================================================

# Diameter realm
DIAMETER_REALM=epc.mnc070.mcc999.3gppnetwork.org

# Diameter identity format
# HSS: hss.{DIAMETER_REALM}
# MME: mme.{DIAMETER_REALM}
# PCRF: pcrf.{DIAMETER_REALM}

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================

# Enable IPv6 support
IPV6_ENABLED=true

# GTP-U tunnel endpoint identifier (TEID) pool size
GTPU_TEID_POOL_SIZE=65536

# PFCP session pool size
PFCP_SESSION_POOL_SIZE=8192

# SBI client connection timeout (milliseconds)
SBI_CLIENT_TIMEOUT=5000

# SBI server request timeout (milliseconds)
SBI_SERVER_TIMEOUT=30000

# NF heartbeat interval (seconds)
NF_HEARTBEAT_INTERVAL=10

# NF registration retry interval (seconds)
NF_REGISTRATION_RETRY=5
